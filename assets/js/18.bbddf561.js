(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{71:function(s,e,a){"use strict";a.r(e);var n=a(0),t=Object(n.a)({},function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("对于一个团队框架来说，『约定优于配置』，按照一套统一的约定进行应用开发，可以极大地减少开发人员的沟通成本。")]),s._v(" "),a("p",[s._v("框架通过 Loader 机制来自动挂载文件，应用开发者只需要添加文件到对应的目录即可。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("showcase\n├── app\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("   ├── router.js\n│   ├── controller\n│   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("   └── home.js\n│   ├── "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v("\n│   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("   └── user.js\n│   ├── middleware\n│   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("   └── response_time.js\n│   └── view\n│       └── home.tpl\n├── config\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("   ├── plugin.js\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("   ├── config.default.js\n│   ├── config.prod.js\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("   ├── config.local.js\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("   └── config.unittest.js\n├── "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("test")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("   ├── controller\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("   └── home.test.js\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("   └── "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       └── user.test.js\n└── package.json\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br")])]),a("p",[s._v("如上，为一个常见的应用目录结构：")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("app")]),s._v("： 为主要的逻辑代码目录。\n"),a("ul",[a("li",[s._v("常规 MVC 如： "),a("code",[s._v("app/controller")]),s._v(" 、 "),a("code",[s._v("app/service")]),s._v(" 、 "),a("code",[s._v("app/router.js")]),s._v(" 等。")]),s._v(" "),a("li",[s._v("某些插件也会自定义加载规范，如 "),a("code",[s._v("app/rpc")]),s._v(" 等目录的自动挂载。")])])]),s._v(" "),a("li",[a("code",[s._v("config")]),s._v("： 为配置目录，包含不同环境的配置文件，以及插件挂载声明。")]),s._v(" "),a("li",[a("code",[s._v("test")]),s._v("： 为单元测试目录。")]),s._v(" "),a("li",[a("code",[s._v("run")]),s._v("：每次启动期都会 dump 的相关信息，用于问题排查，建议加入 "),a("code",[s._v("gitignore")]),s._v("。")])]),s._v(" "),a("p",[s._v("文件挂载如下：")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("app/controller/home.js")]),s._v(" 会被自动挂载到 "),a("code",[s._v("app.controller.home")]),s._v("。")]),s._v(" "),a("li",[a("code",[s._v("app/service/user.js")]),s._v(" 会被自动挂载到 "),a("code",[s._v("ctx.service.user")]),s._v("。")])]),s._v(" "),a("div",{staticClass:"warning custom-block"},[a("p",{staticClass:"custom-block-title"},[s._v("注意事项")]),s._v(" "),a("p",[s._v("需要注意的是，"),a("strong",[s._v("加载文件时会进行驼峰转换")]),s._v("，因此文件名和挂载的属性名可能会存在差异：")]),s._v(" "),a("ul",[a("li",[s._v("默认情况下，连字符和下划线均会被转换为驼峰格式。")]),s._v(" "),a("li",[s._v("如 "),a("code",[s._v("app/middleware/response_time.js")]),s._v(" 挂载为 "),a("code",[s._v("app.middleware.responseTime")]),s._v("。")]),s._v(" "),a("li",[s._v("部分插件，如 mongoose 插件有特殊约定，会挂载为类格式，如 "),a("code",[s._v("app.model.User")]),s._v("。")])])]),s._v(" "),a("p",[s._v("在后面的章节中，我们会逐步介绍具体的目录约定。")]),s._v(" "),a("p",[s._v("如果需要自定义加载规则，可以参见 Loader 相关文档。")])])},[],!1,null,null,null);e.default=t.exports}}]);